<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The "Three Kings" Echo: Generative Lattice Flow</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PrismJS for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 50: '#f0fdfa', 100: '#ccfbf1', 500: '#14b8a6', 900: '#134e4a' }
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #f8fafc; color: #0f172a; }
        .prose h2 { color: #0f172a; border-bottom: 2px solid #e2e8f0; padding-bottom: 0.5rem; margin-top: 2.5rem; }
        .prose h3 { color: #334155; margin-top: 2rem; }
        .glass-panel { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid #e2e8f0; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .lattice-pattern { background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 10px 10px; }
    </style>
</head>
<body class="bg-slate-50 font-sans leading-relaxed selection:bg-brand-500 selection:text-white">

    <!-- Hero Section -->
    <header class="bg-slate-900 text-white py-16 lattice-pattern relative overflow-hidden">
        <div class="absolute inset-0 bg-slate-900/90"></div>
        <div class="max-w-4xl mx-auto px-6 relative z-10">
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-4 text-transparent bg-clip-text bg-gradient-to-r from-brand-100 to-brand-500">
                The "Three Kings" Echo: Generative Physics and the Restoration of Information
            </h1>
            <p class="text-xl md:text-2xl font-light text-slate-300 mb-6">
                Bridging CAM-8 Lineage to 2026-Era Tensor Computing
            </p>
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
                <div class="flex items-center space-x-4">
                    <div class="h-10 w-10 rounded-full bg-brand-500 flex items-center justify-center font-bold text-slate-900">TB</div>
                    <div class="h-10 w-10 -ml-6 rounded-full bg-blue-500 flex items-center justify-center font-bold text-white border-2 border-slate-900">GP</div>
                    <div>
                        <p class="font-medium">By Edward "Ted" A. Bach and Gemini Pro</p>
                        <p class="text-sm text-slate-400 font-mono tracking-wide mt-1"><time datetime="2026-02-28">February 28, 2026</time> • Academic Blog Post</p>
                    </div>
                </div>
                <!-- Prominent Colab Link -->
                <a href="https://colab.research.google.com/drive/1qHhDEB0Fh7lyzGmlrYqBc7q4Njy0Ja3u#scrollTo=4VXZNVrxQlu5" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-slate-900 bg-brand-500 hover:bg-brand-400 transition-colors shadow-lg hover:shadow-xl">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14.5v-9l6 4.5-6 4.5z"/></svg>
                    Run FHP/HPP in Google Colab
                </a>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-6 py-12">
        
        <!-- Abstract -->
        <section class="glass-panel rounded-xl p-8 mb-12 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-1 h-full bg-brand-500"></div>
            <h2 class="text-2xl font-bold mb-4 text-slate-800">Abstract & Motivation</h2>
            <p class="text-lg text-slate-600 mb-4">
                This document serves as an academic roadmap and a tribute for the "Three Kings" celebration, honoring the foundational contributions of <strong>Tom Toffoli</strong>, <strong>Norm Margolus</strong>, and <strong>Charlie Bennett</strong> to digital physics and reversible computing. Conceived during a Friday car ride and realized over a 6-hour coding sprint on a Saturday morning, this experiment re-codes the principles of the legacy SIMP/STEP environment into a modern, tensor-accelerated framework.
            </p>
            <p class="text-lg text-slate-600">
                The result is <strong>Generative Lattice Flow</strong>—a methodology that combines human architectural insight with Large Language Models (LLMs) to compile high-level physical rules into bare-metal tensor operations. By decoupling transport and interaction, we achieve a bit-perfect "Bennett Echo" in an HPP lattice gas, reaching a peak throughput of <strong class="text-brand-900 bg-brand-100 px-2 py-1 rounded">1.47 GSPS (Giga-Sites Per Second)</strong> on a standard cloud CPU for the 4-bit model.
            </p>
        </section>

        <article class="prose max-w-none text-slate-700">
            
            <!-- Framework -->
            <h2>I. The LatticeFlow Conceptual Framework</h2>
            <p>
                The core of this methodology is the formal decoupling of <strong>Movement</strong> (where a particle goes) from <strong>Logic</strong> (what happens when particles meet). This absolute separation is mathematically necessary for functional reversibility in discrete physics.
            </p>

            <!-- Diagrams: Transport vs Interaction -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 my-8">
                <!-- Transport Diagram -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center">
                    <h4 class="font-bold text-slate-800 mb-4 text-center">Phase 1: Transport (The Shift)</h4>
                    <svg viewBox="0 0 200 200" class="w-48 h-48">
                        <defs>
                            <marker id="arrow-n" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#3b82f6" /></marker>
                            <marker id="arrow-s" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#10b981" /></marker>
                            <marker id="arrow-e" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#f59e0b" /></marker>
                            <marker id="arrow-w" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#8b5cf6" /></marker>
                        </defs>
                        <!-- Grid Background -->
                        <path d="M40 40 L160 40 M40 80 L160 80 M40 120 L160 120 M40 160 L160 160" stroke="#e2e8f0" stroke-width="2"/>
                        <path d="M40 40 L40 160 M80 40 L80 160 M120 40 L120 160 M160 40 L160 160" stroke="#e2e8f0" stroke-width="2"/>
                        <!-- Particles Shifting in 4 directions -->
                        <circle cx="100" cy="100" r="10" fill="#cbd5e1" opacity="0.5"/>
                        <line x1="100" y1="95" x2="100" y2="55" stroke="#3b82f6" stroke-width="4" marker-end="url(#arrow-n)"/>
                        <line x1="100" y1="105" x2="100" y2="145" stroke="#10b981" stroke-width="4" marker-end="url(#arrow-s)"/>
                        <line x1="105" y1="100" x2="145" y2="100" stroke="#f59e0b" stroke-width="4" marker-end="url(#arrow-e)"/>
                        <line x1="95" y1="100" x2="55" y2="100" stroke="#8b5cf6" stroke-width="4" marker-end="url(#arrow-w)"/>
                        <text x="100" y="190" text-anchor="middle" class="text-xs fill-slate-500 font-mono">Non-local Data Movement</text>
                    </svg>
                </div>
                
                <!-- Interaction Diagram -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center">
                    <h4 class="font-bold text-slate-800 mb-4 text-center">Phase 2: Interaction (The Rule)</h4>
                    <svg viewBox="0 0 200 200" class="w-48 h-48">
                        <defs>
                            <marker id="arrow-in" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8" /></marker>
                            <marker id="arrow-out" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#ef4444" /></marker>
                        </defs>
                        <!-- Grid Background -->
                        <path d="M40 40 L160 40 M40 80 L160 80 M40 120 L160 120 M40 160 L160 160" stroke="#e2e8f0" stroke-width="2" opacity="0.5"/>
                        <path d="M40 40 L40 160 M80 40 L80 160 M120 40 L120 160 M160 40 L160 160" stroke="#e2e8f0" stroke-width="2" opacity="0.5"/>
                        <!-- Highlight Single Cell -->
                        <rect x="80" y="80" width="40" height="40" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
                        <!-- Collision strictly inside cell -->
                        <!-- Incoming N & S -->
                        <line x1="100" y1="82" x2="100" y2="94" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrow-in)"/>
                        <line x1="100" y1="118" x2="100" y2="106" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrow-in)"/>
                        <!-- Outgoing E & W -->
                        <line x1="106" y1="100" x2="118" y2="100" stroke="#ef4444" stroke-width="3" marker-end="url(#arrow-out)"/>
                        <line x1="94" y1="100" x2="82" y2="100" stroke="#ef4444" stroke-width="3" marker-end="url(#arrow-out)"/>
                        <text x="100" y="190" text-anchor="middle" class="text-xs fill-slate-500 font-mono">Strictly Local Bitwise Logic</text>
                    </svg>
                </div>
            </div>

            <div class="overflow-x-auto my-8">
                <table class="min-w-full bg-white border border-slate-200 shadow-sm rounded-lg overflow-hidden">
                    <thead class="bg-slate-800 text-white">
                        <tr>
                            <th class="py-3 px-4 text-left text-sm font-semibold tracking-wide">Concept</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold tracking-wide">The Physics (What it represents)</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold tracking-wide">The Geometry (How it operates)</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-200">
                        <tr class="hover:bg-slate-50 transition-colors">
                            <td class="py-3 px-4 font-medium text-slate-900">Transport (Shift)</td>
                            <td class="py-3 px-4"><strong>Convection / Momentum:</strong> The linear movement of a particle through space over a time step <em>dt</em>. No energy is exchanged.</td>
                            <td class="py-3 px-4">A translation of a bit-plane or signal by a vector <em>v</em>. A non-local operation where data moves across memory.</td>
                        </tr>
                        <tr class="hover:bg-slate-50 transition-colors bg-slate-50/50">
                            <td class="py-3 px-4 font-medium text-slate-900">Interaction (Rule)</td>
                            <td class="py-3 px-4"><strong>Collision / Scattering:</strong> The local exchange of state between particles at the same spatial coordinate. Energy/Momentum are conserved here.</td>
                            <td class="py-3 px-4">A logic function <em>f(s)</em> applied to the "stack" of bits at a single site. A strictly local operation (no neighbor access needed).</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Implementation Lineage: From Wires to Tensors</h3>
            <div class="overflow-x-auto my-6">
                <table class="min-w-full bg-white border border-slate-200 shadow-sm rounded-lg overflow-hidden">
                    <thead class="bg-slate-100 text-slate-700">
                        <tr>
                            <th class="py-3 px-4 text-left text-sm font-semibold tracking-wide">Technology Layer</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold tracking-wide">Transport Implementation</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold tracking-wide">Interaction Implementation</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold tracking-wide">The "Hardware Trick"</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-200 text-sm">
                        <tr>
                            <td class="py-3 px-4 font-semibold text-brand-900">CAM-8 (1990s)</td>
                            <td class="py-3 px-4"><strong>Hardware Wires:</strong> Physical address offsets across a 3D memory manifold.</td>
                            <td class="py-3 px-4"><strong>Lookup Tables (SRAM):</strong> High-speed SRAM buffers mapping inputs to outputs.</td>
                            <td class="py-3 px-4"><strong>Bit-Slicing:</strong> Every bit-plane had its own wiring to move data in parallel.</td>
                        </tr>
                        <tr class="bg-slate-50/50">
                            <td class="py-3 px-4 font-semibold text-brand-900">SIMP/STEP (2000s)</td>
                            <td class="py-3 px-4"><strong>Scan Processor Offset:</strong> A virtual-interrupt loop calculating <code>(x+dx, y+dy)</code>.</td>
                            <td class="py-3 px-4"><strong>Python DSL to C:</strong> Logic defined in Python, compiled into rapid C-macros.</td>
                            <td class="py-3 px-4"><strong>Virtual Interrupts:</strong> Handled boundaries without slowing the main scan loop.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-semibold text-brand-900">LatticeFlow (2026)</td>
                            <td class="py-3 px-4"><strong>Tensor Roll:</strong> Vectorized memory strides (<code>jnp.roll</code>) moving entire arrays at once.</td>
                            <td class="py-3 px-4"><strong>Bitwise Kernel:</strong> Fused JAX/XLA kernels performing bitwise logic.</td>
                            <td class="py-3 px-4"><strong>SIMD / GPU Fusion:</strong> The compiler merges shift and rule into optimized tensor ops.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="bg-slate-800 text-slate-300 text-sm p-5 rounded-lg mb-8 border border-slate-700">
                <strong class="text-brand-400">Hardware Acceleration Note:</strong> While the current 1.47 GSPS HPP experiments run purely on the CPU leveraging SIMD (Single Instruction, Multiple Data) instructions, this tensor-based approach natively supports massive hardware acceleration. The transition to JAX (<code>jnp</code>) means that the exact same LatticeFlow codebase can be dispatched out-of-the-box to modern GPUs, unlocking massive parallel speedups.
            </div>

            <!-- Anatomy of the Generative Kernel -->
            <h2>II. Anatomy of the Generative Kernel (LatticeFlow)</h2>
            <p>A crucial outcome of this sprint is translating the historical data movement concepts into pure JAX Python. The code below illustrates how the <strong>Rule</strong>, <strong>Data Movement</strong>, and <strong>Reversibility Operator</strong> are defined in LatticeFlow.</p>

<pre><code class="language-python">@staticmethod
@jax.jit
def _hpp_rule(state):
    # 1. UNPACK: Extract the 4 directional bit-planes from the single uint8 tensor
    n, s, e, w = (state >> 0)&1, (state >> 1)&1, (state >> 2)&1, (state >> 3)&1
    
    # 2. EVALUATE: Determine head-on collisions across the entire grid simultaneously
    coll_ns = (n & s) & ~(e | w)  # North & South exist, East & West empty
    coll_ew = (e & w) & ~(n | s)  # East & West exist, North & South empty
    
    # 3. INTERACT: Apply the self-inverse HPP swap via bitwise masking
    new_n = jnp.where(coll_ns, 0, jnp.where(coll_ew, 1, n))
    new_s = jnp.where(coll_ns, 0, jnp.where(coll_ew, 1, s))
    new_e = jnp.where(coll_ew, 0, jnp.where(coll_ns, 1, e))
    new_w = jnp.where(coll_ew, 0, jnp.where(coll_ns, 1, w))
    
    # 4. REPACK: Re-assemble the bits into the uint8 tensor
    return (new_n << 0) | (new_s << 1) | (new_e << 2) | (new_w << 3)

@staticmethod
@jax.jit
def _forward_kernel(state):
    # TRANSPORT (Forward): Roll bit-planes along their velocity vectors
    n = jnp.roll((state >> 0)&1, -1, 0)
    s = jnp.roll((state >> 1)&1, 1, 0)
    e = jnp.roll((state >> 2)&1, 1, 1)
    w = jnp.roll((state >> 3)&1, -1, 1)
    
    # KERNEL FUSION: Apply interaction rule immediately to shifted state
    return LatticeFlowHPP._hpp_rule((n << 0) | (s << 1) | (e << 2) | (w << 3))

@staticmethod
@jax.jit
def _backward_kernel(state):
    # TRANSPORT (Reverse): Invert shift vectors to walk backward in time
    n = jnp.roll((state >> 0)&1, 1, 0)
    s = jnp.roll((state >> 1)&1, -1, 0)
    e = jnp.roll((state >> 2)&1, -1, 1)
    w = jnp.roll((state >> 3)&1, 1, 1)
    
    return LatticeFlowHPP._hpp_rule((n << 0) | (s << 1) | (e << 2) | (w << 3))
</code></pre>

            <div class="bg-brand-50 border-l-4 border-brand-500 p-4 my-6 rounded-r-lg">
                <h4 class="font-bold text-brand-900 mt-0 mb-1">The "Phase-Sync" Secret</h4>
                <p class="text-sm text-brand-900 m-0">
                    To achieve the "Three Kings" Echo, reversing time is not just a matter of rolling the tensors backward. When the system switches direction, an extra standalone <code>_hpp_rule</code> must be fired. This un-collides the particles from the final forward step so they don't instantly shift away from each other in the first backward step, resulting in zero noise.
                </p>
            </div>

            <!-- Visual Sequence -->
            <h2>III. The Visual Sequence: There and Back Again</h2>
            <p>The "Three Kings" Echo demonstrates the conservation of information. The structured initials of Toffoli (T), Margolus (M), and Bennett (B)—topped with three-point triangular crowns—are thermalized into a chaotic gas, only to be perfectly reconstructed via the time-reversal operator.</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-8">
                <!-- Stage 1 -->
                <div class="bg-black rounded-lg p-4 shadow-lg border border-slate-700">
                    <p class="text-brand-500 font-mono text-xs mb-2">T=0 | REGAL INITIALS (HPP)</p>
                    <svg viewBox="0 0 400 200" class="w-full h-auto" style="background: #111;">
                        <rect x="0" y="0" width="400" height="200" fill="#111"/>
                        <g fill="#f97316">
                            <!-- T -->
                            <polygon points="60,30 50,45 70,45" />
                            <polygon points="80,25 75,45 85,45" />
                            <polygon points="100,30 90,45 110,45" />
                            <rect x="50" y="45" width="60" height="10"/>
                            <rect x="75" y="55" width="10" height="60"/>
                            <!-- M -->
                            <polygon points="170,30 160,45 180,45" />
                            <polygon points="190,25 185,45 195,45" />
                            <polygon points="210,30 200,45 220,45" />
                            <rect x="160" y="45" width="60" height="10"/>
                            <rect x="160" y="55" width="15" height="60"/>
                            <rect x="205" y="55" width="15" height="60"/>
                            <polygon points="175,55 205,55 190,80"/>
                            <!-- B -->
                            <polygon points="280,30 270,45 290,45" />
                            <polygon points="300,25 295,45 305,45" />
                            <polygon points="320,30 310,45 330,45" />
                            <rect x="270" y="45" width="15" height="70"/>
                            <rect x="285" y="45" width="35" height="10"/>
                            <rect x="285" y="75" width="30" height="10"/>
                            <rect x="285" y="105" width="35" height="10"/>
                            <rect x="310" y="55" width="10" height="20"/>
                            <rect x="315" y="85" width="10" height="20"/>
                        </g>
                    </svg>
                </div>
                <!-- Stage 2 -->
                <div class="bg-black rounded-lg p-4 shadow-lg border border-slate-700">
                    <p class="text-brand-500 font-mono text-xs mb-2">T=100 | THE CLOUD (THERMALIZATION)</p>
                    <svg viewBox="0 0 400 200" class="w-full h-auto" style="background: #111;">
                        <defs>
                            <pattern id="noise" x="0" y="0" width="10" height="10" patternUnits="userSpaceOnUse">
                                <rect x="2" y="2" width="2" height="2" fill="#f97316" opacity="0.6"/>
                                <rect x="7" y="5" width="2" height="2" fill="#ea580c" opacity="0.8"/>
                                <rect x="3" y="8" width="2" height="2" fill="#c2410c" opacity="0.4"/>
                            </pattern>
                        </defs>
                        <rect x="0" y="0" width="400" height="200" fill="url(#noise)"/>
                    </svg>
                </div>
                <!-- Stage 3 -->
                <div class="bg-black rounded-lg p-4 shadow-lg border border-slate-700">
                    <p class="text-brand-500 font-mono text-xs mb-2">T=10 (REVERSE) | RE-ENTRY</p>
                    <svg viewBox="0 0 400 200" class="w-full h-auto" style="background: #111;">
                        <rect x="0" y="0" width="400" height="200" fill="url(#noise)" opacity="0.5"/>
                        <g fill="#f97316" opacity="0.4" filter="blur(2px)">
                            <!-- Faint outlines of T M B returning -->
                            <rect x="50" y="45" width="60" height="10"/><rect x="75" y="55" width="10" height="60"/>
                            <rect x="160" y="45" width="60" height="10"/><rect x="160" y="55" width="15" height="60"/><rect x="205" y="55" width="15" height="60"/><polygon points="175,55 205,55 190,80"/>
                            <rect x="270" y="45" width="15" height="70"/><rect x="285" y="45" width="35" height="10"/><rect x="285" y="75" width="30" height="10"/><rect x="285" y="105" width="35" height="10"/><rect x="310" y="55" width="10" height="20"/><rect x="315" y="85" width="10" height="20"/>
                        </g>
                    </svg>
                </div>
                <!-- Stage 4 -->
                <div class="bg-black rounded-lg p-4 shadow-lg border border-slate-700">
                    <p class="text-brand-500 font-mono text-xs mb-2">T=0 | BIT-PERFECT RESTORATION</p>
                    <svg viewBox="0 0 400 200" class="w-full h-auto" style="background: #111;">
                        <rect x="0" y="0" width="400" height="200" fill="#111"/>
                        <g fill="#f97316">
                            <polygon points="60,30 50,45 70,45" /><polygon points="80,25 75,45 85,45" /><polygon points="100,30 90,45 110,45" /><rect x="50" y="45" width="60" height="10"/><rect x="75" y="55" width="10" height="60"/>
                            <polygon points="170,30 160,45 180,45" /><polygon points="190,25 185,45 195,45" /><polygon points="210,30 200,45 220,45" /><rect x="160" y="45" width="60" height="10"/><rect x="160" y="55" width="15" height="60"/><rect x="205" y="55" width="15" height="60"/><polygon points="175,55 205,55 190,80"/>
                            <polygon points="280,30 270,45 290,45" /><polygon points="300,25 295,45 305,45" /><polygon points="320,30 310,45 330,45" /><rect x="270" y="45" width="15" height="70"/><rect x="285" y="45" width="35" height="10"/><rect x="285" y="75" width="30" height="10"/><rect x="285" y="105" width="35" height="10"/><rect x="310" y="55" width="10" height="20"/><rect x="315" y="85" width="10" height="20"/>
                        </g>
                    </svg>
                </div>
            </div>

            <h3 class="text-xl font-bold mt-12 mb-4">Extension: The FHP Hexagonal Lattice</h3>
            <p>The Colab experiment additionally extends this Generative Lattice Flow methodology to the <strong>FHP (Frisch-Hasslacher-Pomeau)</strong> hexagonal lattice model. The three stages of the FHP echo—structured initialization, thermodynamic dissipation, and reversible reconstruction—are shown below.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 my-6">
                <div class="text-center">
                    <img src="TMB0.png" alt="FHP Initialization" class="rounded shadow-md border border-slate-300 w-full mb-2 object-cover aspect-video">
                    <span class="text-xs text-slate-500 font-mono font-bold block">FHP: T=0</span>
                    <span class="text-xs text-slate-400 font-mono block">Initialization</span>
                </div>
                <div class="text-center">
                    <img src="TMB100.png" alt="FHP Partially Thermalized" class="rounded shadow-md border border-slate-300 w-full mb-2 object-cover aspect-video">
                    <span class="text-xs text-slate-500 font-mono font-bold block">FHP: T=100</span>
                    <span class="text-xs text-slate-400 font-mono block">Partially Thermalized</span>
                </div>
                <div class="text-center">
                    <img src="TMB1000.png" alt="FHP Fully Thermalized" class="rounded shadow-md border border-slate-300 w-full mb-2 object-cover aspect-video">
                    <span class="text-xs text-slate-500 font-mono font-bold block">FHP: T=1,000</span>
                    <span class="text-xs text-slate-400 font-mono block">High Entropy Peak</span>
                </div>
                 <div class="text-center">
                    <img src="TMB0.png" alt="FHP Restored" class="rounded shadow-md border border-slate-300 w-full mb-2 object-cover aspect-video">
                    <span class="text-xs text-slate-500 font-mono font-bold block">FHP: T=0</span>
                    <span class="text-xs text-slate-400 font-mono block">Echo Restored</span>
                </div>               
            </div>
            
            <div class="bg-slate-800 text-slate-300 text-sm p-4 rounded-lg font-mono mb-8 border border-slate-700">
                <strong>Performance Metrics:</strong> Operating on a 400x647 grid, the LatticeFlow FHP engine processes complex 6-way hexagonal collisions at an estimated sustained throughput of <strong>~25.8 MSPS</strong> (inclusive of interactive overhead). At this speed, the complete 2,000-step macroscopic "there and back" journey (1,000 steps forward + 1,000 steps reversed) resolves in approximately <strong>20 seconds</strong> of total clock time on a standard cloud CPU.
            </div>

            <!-- Historical Lineage -->
            <h2>IV. Historical Lineage: CAM-8 & SIMP/STEP</h2>
            <p>While LatticeFlow uses pure JAX arrays, tracing the historical evolution of the <strong>HPP Collision Rule</strong> reveals how the conceptual decoupling of movement and logic has remained a constant throughout the hardware's evolution.</p>

            <div class="space-y-6 my-8">
                <!-- CAM-8 -->
                <div class="bg-slate-800 rounded-lg overflow-hidden shadow-lg">
                    <div class="bg-slate-900 px-4 py-2 flex items-center justify-between">
                        <span class="text-brand-500 font-mono text-sm font-bold">1. CAM-8 (Hardware SRAM LUT, ~1990s)</span>
                        <span class="text-slate-400 text-xs">Hardware Architecture</span>
                    </div>
                    <div class="p-5 text-sm text-slate-300 font-mono leading-relaxed border-t border-slate-700">
                        # The CAM-8 did not evaluate logic on the fly. <br>
                        # Instead, a host PC pre-calculated all possible bit-state outcomes into a Lookup Table (LUT).<br>
                        # During the simulation, the hardware used the current 16-bit site state as a memory address <br>
                        # to fetch the next state directly from high-speed SRAM in a single clock cycle.<br>
                        # Transport was handled by physical wire routing and address offsets across a 3D memory manifold.
                    </div>
                </div>

                <!-- SIMP/STEP -->
                <div class="bg-slate-800 rounded-lg overflow-hidden shadow-lg">
                    <div class="bg-slate-900 px-4 py-2 flex items-center justify-between">
                        <span class="text-blue-400 font-mono text-sm font-bold">2. SIMP/STEP (Python DSL, ~2000s)</span>
                        <span class="text-slate-400 text-xs">Python DSL to C</span>
                    </div>
                    <div class="p-0 border-t border-slate-700">
<pre><code class="language-python" style="margin:0; background:transparent;">#-------------------------------- COLLISION 
def hpp():  # scatter at right angles on collision
    if ( (p0==p2) and (p1==p3) ):
        p0._ = p3;    p1._ = p2       # swap horizontally
        p3._ = p0;    p2._ = p1
hpp = Rule(hpp)

#-------------------------------- RENDERING
white = OutSignal(UInt8,generator=[1,1])   

def intensity():   
    white[0,0]._ = (p0+p1+p2+p3)*255/4
    white[0,1]._ = (p0+p1+p2+p3)*255/4    

render_rule = Rule(intensity)
rend = Renderer(render_rule,outputs=white)

#-------------------------------- Declare the update
hpp_step = Sequence([
        Shift(kvdict( p0=[ 1, 0],
             p1=[ 0, 1],      p3=[ 0,-1],
                      p2=[-1, 0],
             render_rule=[0,-1])),
        hpp])

# transport particles in the reverse directions
reverse_hpp_step = Sequence([
        Shift(kvdict( p0=[-1, 0],
             p1=[ 0,-1],      p3=[ 0, 1],
                      p2=[ 1, 0],
             render_rule=[0,-1])),
        hpp])</code></pre>
                    </div>
                </div>
            </div>

            <!-- Future Directions -->
            <h2>V. Future Directions: Building the LatticeFlow Library</h2>
            <p>This endeavor is a foundation meant to be built upon. The ultimate vision is to establish <strong>LatticeFlow</strong> as a formal, open-source python library—the direct spiritual inheritor of the CAM-8 work and SIMPSTEP for modern hardware. We invite contributors to help build this roadmap:</p>
            <ul class="list-disc pl-6 mb-6">
                <li><strong>AI-Assisted Legacy Porting:</strong> A key next step is executing a full port of the legacy codebase housed at <a href="https://github.com/tedbach76/latticeflow/tree/main/threekings/simpstep" target="_blank" class="text-brand-500 hover:text-brand-700 underline font-mono break-words">github.com/tedbach76/latticeflow/tree/main/threekings/simpstep</a>. We will leverage AI coding agents, specifically <strong>Claude Code</strong>, to autonomously translate the C-macro paradigms of SIMPSTEP into optimized JAX tensors.</li>
                <li><strong>The <em>Cellular Automata Machines</em> Revival:</strong> Re-coding the classic examples from Toffoli and Margolus's seminal CAM-8 manual into executable, browser-based tutorials under the new framework.</li>
                <li><strong>API Formalization:</strong> Wrapping the <code>Transport</code> and <code>Rule</code> mechanics into a high-level API so researchers can define complex physics without managing the underlying bitwise JAX compiler operations.</li>
            </ul>

            <div class="bg-slate-100 p-6 rounded-xl border border-slate-200">
                <h4 class="font-bold text-slate-800 mt-0 mb-2">Case Study: The Polymer Rule</h4>
                <p class="text-sm text-slate-600 m-0">
                    As a preview of future complexity to be ported via Claude Code, the historical SIMP code for polymer simulation (<a href="https://github.com/tedbach76/latticeflow/blob/main/threekings/simpstep/polymer.py" target="_blank" class="text-brand-500 hover:text-brand-700 underline"><code>polymer.py</code></a>) utilizes a 'pinwheel' partitioning CA neighborhood. Particles move only if doing so doesn't break polymer chains. Because particles cannot swap independently, the rule requires evaluating a 2x2 "together" block to respect the 'sensitive horns' of the dogbone geometry. Implementing this natively in LatticeFlow will demonstrate the framework's capacity for complex, multi-site partitioning logic on GPU tensors.
                </p>
            </div>

            <hr class="my-12 border-slate-200" />

            <!-- Appendices -->
            <h2>Appendix A: Tools & Generative Seeds (Perplexity)</h2>
            <p>This R&D endeavor relied on a "Generative Physics" workflow, utilizing conversational AI as a dynamic compiler.</p>
            <ul class="list-disc pl-6 mb-6">
                <li><strong>Compute Engine:</strong> JAX / XLA (Accelerated Linear Algebra) via Google Colab.</li>
                <li><strong>Hardware Target:</strong> Intel(R) Xeon(R) Broadwell (2 Cores, 55MB L3 Cache) achieving 1.47 GSPS (HPP) / 25.8 MSPS (FHP).</li>
                <li><strong>LLM Partner:</strong> Gemini Pro.</li>
            </ul>
            <h4>A sampling of the seed prompts & conceptual instructions employed:</h4>
            <ol class="list-decimal pl-6 bg-slate-800 text-slate-300 p-6 rounded-xl font-mono text-sm shadow-inner space-y-2">
                <li>"Translate the SIMP/STEP conceptual separation of Transport and Interaction into vectorized JAX tensors."</li>
                <li>"Implement a bit-packed 4-bit HPP collision rule using only bitwise logical operators to ensure XLA fusion."</li>
                <li>"Design a phase-sync bridge to reverse transport vectors in a lattice gas without introducing boundary noise or off-by-one phase errors (The Bennett Echo)."</li>
                <li>"Generate an immutable spatial mask of the letters T, M, and B, crowned with triangular regalia, centered in a golden-ratio 400x647 vacuum."</li>
            </ol>

            <h2>Appendix B: References & Essential Links</h2>
            <ul class="list-none space-y-3 pl-0">
                <li class="flex items-start"><span class="text-brand-500 mr-2">▪</span><span>Toffoli, T., & Margolus, N. (1987). <a href="https://mitpress.mit.edu/9780262531207/cellular-automata-machines/" target="_blank" class="text-brand-600 hover:underline"><em>Cellular Automata Machines</em></a>. MIT Press.</span></li>
                <li class="flex items-start"><span class="text-brand-500 mr-2">▪</span><span>Bach, E. A. (2007). <a href="https://open.bu.edu/handle/2144/11019" target="_blank" class="text-brand-600 hover:underline"><em>Methodology and Implementation of a Software Architecture for Cellular and Lattice-Gas Automata</em></a>. Doctoral dissertation, Boston University. (Advisor: Prof. Tommaso Toffoli).</span></li>
                <li class="flex items-start"><span class="text-brand-500 mr-2">▪</span><span>Bennett, C. H. (1973). <a href="https://research.ibm.com/publications/logical-reversibility-of-computation" target="_blank" class="text-brand-600 hover:underline"><em>Logical Reversibility of Computation</em></a>. IBM J. Res. Dev.</span></li>
                                <li class="flex items-start">
                    <span class="text-brand-500 mr-2">▪</span>
                    <span>Hardy, J., Pomeau, Y., & Pazzis, O. (1973). <em>Time evolution of a two-dimensional model system</em>. Journal of Mathematical Physics.</span>
                </li>
                <li class="flex items-start"><span class="text-brand-500 mr-2">▪</span><span>Bach, E. A. (2026). <a href="https://docs.google.com/document/d/1Dgca_jZR1RxuokmznGJviZUyDC0HcVc9JbOR0nsEgsc/edit?usp=sharing" target="_blank" class="text-brand-600 hover:underline"><em>The Entropy of Ideas</em></a>. Working Draft.</span></li>
                <li class="flex items-start mt-4 p-4 bg-brand-50 border border-brand-200 rounded-lg shadow-sm"><span class="text-brand-500 font-bold mr-2">↳</span><span><a href="https://colab.research.google.com/drive/1qHhDEB0Fh7lyzGmlrYqBc7q4Njy0Ja3u#scrollTo=4VXZNVrxQlu5" target="_blank" class="font-semibold text-brand-900 hover:underline">Live Interactive Experiment: The Three Kings Echo (Google Colab)</a></span></li>
            </ul>



        </article>
    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 text-center mt-12 border-t border-slate-800">
        <p class="text-sm">Created for the LatticeFlow Repository on GitHub (<a href="https://github.com/tedbach76/latticeflow" class="text-brand-500 hover:text-brand-400">tedbach76/latticeflow</a>).</p>
        <p class="text-sm mt-2">© 2026 Edward A. Bach and Gemini Pro. Honoring the pioneers of Reversible Computing.</p>
    </footer>

</body>
</html>